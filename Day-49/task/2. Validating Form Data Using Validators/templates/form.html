<!doctype html>
<html>
<head>
    <style>
        .error { color: red; }
        .input-error input { border: 2px solid red; }
    </style>
    <title>Validation Form</title>
</head>
<body>
    <h2>Registration Form</h2>
    {% if error_count %}
        <p class="error">Total Errors: {{ error_count }}</p>
    {% endif %}

    <form method="POST">
        {{ form.hidden_tag() }}

        <div class="{% if form.name.errors %}input-error{% endif %}">
            {{ form.name.label }} {{ form.name() }}
            {% for err in form.name.errors %}
                <p class="error">{{ err }}</p>
            {% endfor %}
        </div>

        <div class="{% if form.username.errors %}input-error{% endif %}">
            {{ form.username.label }} {{ form.username() }}
            {% for err in form.username.errors %}
                <p class="error">{{ err }}</p>
            {% endfor %}
        </div>

        <div class="{% if form.email.errors %}input-error{% endif %}">
            {{ form.email.label }} {{ form.email() }}
            {% for err in form.email.errors %}
                <p class="error">{{ err }}</p>
            {% endfor %}
        </div>

        <div class="{% if form.age.errors %}input-error{% endif %}">
            {{ form.age.label }} {{ form.age() }}
            {% for err in form.age.errors %}
                <p class="error">{{ err }}</p>
            {% endfor %}
        </div>

        <div class="{% if form.password.errors %}input-error{% endif %}">
            {{ form.password.label }} {{ form.password() }}
            {% for err in form.password.errors %}
                <p class="error">{{ err }}</p>
            {% endfor %}
        </div>

        <div class="{% if form.confirm_password.errors %}input-error{% endif %}">
            {{ form.confirm_password.label }} {{ form.confirm_password() }}
            {% for err in form.confirm_password.errors %}
                <p class="error">{{ err }}</p>
            {% endfor %}
        </div>

        <div class="{% if form.optional_nickname.errors %}input-error{% endif %}">
            {{ form.optional_nickname.label }} {{ form.optional_nickname() }}
            {% for err in form.optional_nickname.errors %}
                <p class="error">{{ err }}</p>
            {% endfor %}
        </div>

        <p>{{ form.submit() }}</p>
    </form>
</body>
</html>
